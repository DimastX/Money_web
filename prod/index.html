<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Производственный дашборд</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard">
        <header class="dashboard-header">
            <h1>Производственный дашборд</h1>
        </header>

        <!-- Фильтр-панель -->
        <section class="filter-panel">
            <div class="filter-row">
                <div class="filter-group">
                    <label class="form-label">Дата от:</label>
                    <input type="date" id="dateFrom" class="form-control">
                </div>
                <div class="filter-group">
                    <label class="form-label">Дата до:</label>
                    <input type="date" id="dateTo" class="form-control">
                </div>
                <div class="filter-group">
                    <label class="form-label">Изделие:</label>
                    <select id="productFilter" multiple="multiple" style="width: 100%;"></select>
                </div>
                <div class="filter-group">
                    <label class="form-label">Участок:</label>
                    <select id="sectionFilter" class="form-control">
                        <option value="">Все участки</option>
                    </select>
                </div>
                <div class="filter-buttons">
                    <button id="applyFilters" class="btn btn--primary">Применить фильтр</button>
                    <button id="resetFilters" class="btn btn--secondary">Сбросить</button>
                </div>
            </div>
        </section>

        <!-- KPI карточки -->
        <section class="kpi-section">
            <div class="kpi-cards">
                <div class="kpi-card">
                    <div class="kpi-value" id="totalHours">0</div>
                    <div class="kpi-label">Общие часы</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value" id="totalCost">0 ₽</div>
                    <div class="kpi-label">Общая стоимость</div>
                </div>
            </div>
        </section>

        <!-- Графики -->
        <section class="charts-section">
            <div class="chart-row">
                <div class="chart-container">
                    <h3>Операции по времени/стоимости</h3>
                    <div class="chart-wrapper" style="position: relative; height: 400px;">
                        <canvas id="operationsChart"></canvas>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>Таймлайн загрузки</h3>
                    <div class="chart-wrapper" style="position: relative; height: 400px;">
                        <canvas id="timelineChart"></canvas>
                    </div>
                </div>
            </div>
            <!-- Новая строка для круговых диаграмм -->
            <div class="chart-row">
                <div class="chart-container">
                    <h3>Распределение часов по операциям</h3>
                    <div class="chart-wrapper" style="position: relative; height: 400px;">
                        <canvas id="hoursPieChart"></canvas>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>Распределение стоимости по операциям</h3>
                    <div class="chart-wrapper" style="position: relative; height: 400px;">
                        <canvas id="costPieChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Таблица детализации -->
        <section class="table-section">
            <h3>Детализация операций</h3>
            <div class="table-container">
                <table id="detailsTable" class="details-table">
                    <thead>
                        <tr>
                            <th data-sort="operation" class="sortable">
                                Операция 
                                <span class="sort-indicator"></span>
                            </th>
                            <th data-sort="section" class="sortable">
                                Участок 
                                <span class="sort-indicator"></span>
                            </th>
                            <th data-sort="hours" class="sortable">
                                Часы 
                                <span class="sort-indicator"></span>
                            </th>
                            <th data-sort="cost" class="sortable">
                                Стоимость 
                                <span class="sort-indicator"></span>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <script src="config.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="app.js"></script>
</body>
</html>